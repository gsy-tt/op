# ==========================
# OpenWrt 配置文件 - 京东云 BE6500 (IPQ5332)
# ==========================

# ===== 基础配置 =====
CONFIG_TARGET_ipq807x=y
CONFIG_TARGET_ipq807x_generic=y
CONFIG_TARGET_IPQ807X_DEVICE_jd-be6500=y  # 强制指定设备目标
CONFIG_TARGET_DEVICE_PACKAGES_jd-be6500="kmod-ath11k-ct kmod-qca-ppe kmod-qca-nss-drv kmod-qca-nss-gmac kmod-thermal-qcom"
CONFIG_DEFAULT_TARGET_OPTIMIZATION="-O2 -march=armv8-a+crc -mtune=cortex-a53"
CONFIG_TARGET_ROOTFS_PARTSIZE=128           # 根文件系统分区大小(MB)
CONFIG_TARGET_KERNEL_PARTSIZE=16            # 内核分区大小(MB)
CONFIG_IPQ807X_DTS_DEVICE="qcom,ipq5332-jd-be6500"       # 设备树目标名称

# ===== 内核配置 =====
CONFIG_KERNEL_BLK_DEV_INITRD=y         # 支持 initrd
CONFIG_KERNEL_CRYPTO=y                 # 加密算法支持
CONFIG_KERNEL_CRYPTO_AES=y             # AES 加密
CONFIG_KERNEL_CRYPTO_GCM=y             # GCM 模式
CONFIG_KERNEL_CRYPTO_HMAC=y            # HMAC 支持
CONFIG_KERNEL_CRYPTO_SHA256=y          # SHA256 哈希
CONFIG_KERNEL_NETFILTER=y              # 网络过滤
CONFIG_KERNEL_NETFILTER_XT_MATCH_ADDRTYPE=y  # 地址类型匹配
CONFIG_KERNEL_NETFILTER_XT_MATCH_CONNTRACK=y # 连接跟踪匹配
CONFIG_KERNEL_NETFILTER_XT_MATCH_IPVS=y     # IPVS 匹配
CONFIG_KERNEL_NETFILTER_XT_MATCH_MULTIPORT=y # 多端口匹配
CONFIG_KERNEL_NETFILTER_XT_MATCH_STRING=y    # 字符串匹配
CONFIG_KERNEL_NETFILTER_XT_TARGET_NFLOG=y    # 日志记录
CONFIG_KERNEL_NETFILTER_XT_TARGET_REDIRECT=y # 重定向
CONFIG_KERNEL_NETFILTER_XT_TARGET_TPROXY=y   # TPROXY 透明代理
CONFIG_KERNEL_DTB_PARTITION=y        # 支持设备树分区
CONFIG_OF_CONTROL=y                # 设备树控制接口
CONFIG_KERNEL_CPU_FREQ_GOV_ONDEMAND=y  # CPU 频率按需调节
CONFIG_KERNEL_CPU_FREQ_GOV_CONSERVATIVE=y  # CPU 频率保守调节
CONFIG_KERNEL_CPU_FREQ_GOV_PERFORMANCE=y  # CPU 频率性能模式
CONFIG_KERNEL_SCHED_MC=y                # 多核调度优化
CONFIG_KERNEL_THERMAL=y                 # 热管理支持

# ===== 网络配置 =====
CONFIG_PACKAGE_dnsmasq_full=y          # 增强版 DNS 服务器
CONFIG_PACKAGE_firewall4=y             # 防火墙 v4
CONFIG_PACKAGE_ip6tables=y             # IPv6 防火墙
CONFIG_PACKAGE_iptables=y              # IPv4 防火墙
CONFIG_PACKAGE_iptables-mod-conntrack-extra=y # 连接跟踪扩展
CONFIG_PACKAGE_iptables-mod-ipopt=y    # IP 选项模块
CONFIG_PACKAGE_iptables-mod-nat-extra=y # NAT 扩展
CONFIG_PACKAGE_iputils-ping=y          # ping 工具
CONFIG_PACKAGE_iputils-traceroute=y    # traceroute 工具
CONFIG_PACKAGE_kmod-bridge=y           # 桥接支持
CONFIG_PACKAGE_kmod-dummy=y            # 虚拟网络设备
CONFIG_PACKAGE_kmod-ipt-conntrack=y    # 连接跟踪模块
CONFIG_PACKAGE_kmod-ipt-core=y         # iptables 核心
CONFIG_PACKAGE_kmod-ipt-nat=y          # NAT 模块
CONFIG_PACKAGE_kmod-ip6tables=y        # IPv6 防火墙模块
CONFIG_PACKAGE_kmod-macvlan=y          # MAC 虚拟网络
CONFIG_PACKAGE_kmod-nft-offload=y      # NFT 硬件卸载
CONFIG_PACKAGE_kmod-sit=y              # IPv6-in-IPv4 隧道
CONFIG_PACKAGE_kmod-tun=y              # TUN/TAP 设备
CONFIG_PACKAGE_kmod-veth=y             # 虚拟以太网设备
CONFIG_PACKAGE_luci=y                  # LuCI Web 界面
CONFIG_PACKAGE_luci-app-firewall=y     # 防火墙 LuCI 界面
CONFIG_PACKAGE_luci-i18n-base-zh-cn=y  # 中文语言包
CONFIG_PACKAGE_wpad-openssl=y          # Wi-Fi 管理工具 (OpenSSL)

# ===== 无线驱动 =====
CONFIG_PACKAGE_kmod-ath11k-ct=y         # Wi-Fi 7 驱动 (CT 版本)
CONFIG_PACKAGE_ath11k-firmware-qca64=y  # IPQ5332 专用固件
CONFIG_PACKAGE_ath11k-firmware-qca64-ct=y  # CT版本固件
CONFIG_PACKAGE_hostapd-common=y        # AP 通用组件
CONFIG_PACKAGE_hostapd-ct=y             # AP 驱动 (CT 版本)
CONFIG_PACKAGE_iw=y                    # Wi-Fi 配置工具
CONFIG_PACKAGE_wifi-profile=y          # Wi-Fi 配置文件管理

# ===== 硬件加速 =====
CONFIG_PACKAGE_kmod-qca-ppe=y           # PPE 硬件加速模块
CONFIG_PACKAGE_kmod-qca-nss-drv=y       # NSS 驱动
CONFIG_PACKAGE_kmod-qca-nss-gmac=y      # NSS GMAC 驱动
CONFIG_PACKAGE_kmod-qca-nss-ecm=y       # NSS ECM (加密)
CONFIG_PACKAGE_luci-app-flowoffload=y   # 硬件 NAT 加速 LuCI 界面
CONFIG_PACKAGE_luci-app-turboacc=y      # Turbo ACC 网络加速
CONFIG_PACKAGE_turboacc=y               # Turbo ACC 核心
CONFIG_PACKAGE_nftables=y               # NFTables 防火墙
CONFIG_PACKAGE_nftables-json=y          # NFTables JSON 支持

# ===== 存储与 USB =====
CONFIG_PACKAGE_kmod-fs-ext4=y           # ext4 文件系统
CONFIG_PACKAGE_kmod-fs-vfat=y           # FAT32 文件系统
CONFIG_PACKAGE_kmod-usb-core=y          # USB 核心驱动
CONFIG_PACKAGE_kmod-usb-storage=y       # USB 存储支持
CONFIG_PACKAGE_kmod-usb-storage-extras=y # USB 存储额外驱动
CONFIG_PACKAGE_kmod-usb3=y              # USB 3.0 支持
CONFIG_PACKAGE_usbutils=y               # USB 工具

# ===== 系统工具 =====
CONFIG_PACKAGE_htop=y                   # 高级系统监控
CONFIG_PACKAGE_iperf3=y                 # 网络性能测试
CONFIG_PACKAGE_irqbalance=y             # 中断负载均衡
CONFIG_PACKAGE_luci-app-cpufreq=y       # CPU 频率调节
CONFIG_PACKAGE_luci-app-ddns=y          # DDNS 动态域名
CONFIG_PACKAGE_luci-app-nlbwmon=y       # 网络带宽监控
CONFIG_PACKAGE_luci-app-ttyd=y          # 网页终端
CONFIG_PACKAGE_luci-app-wrtbwmon=y      # 详细带宽统计
CONFIG_PACKAGE_luci-i18n-statistics-zh-cn=y # 统计页面中文
CONFIG_PACKAGE_luci-i18n-firewall-zh-cn=y  # 防火墙中文
CONFIG_PACKAGE_luci-i18n-base-zh-cn=y    # 基础中文
CONFIG_PACKAGE_luci-theme-argon=y       # Argon 主题
CONFIG_PACKAGE_luci-app-argon-config=y  # Argon 主题配置
CONFIG_PACKAGE_screen=y                 # 终端复用工具
CONFIG_PACKAGE_tcpdump=y                # 网络抓包工具
CONFIG_PACKAGE_time=y                   # 时间工具

# ===== VPN 与代理 =====
CONFIG_PACKAGE_luci-app-wireguard=y     # WireGuard VPN
CONFIG_PACKAGE_wireguard-tools=y       # WireGuard 工具
CONFIG_PACKAGE_luci-app-openvpn-server=y # OpenVPN 服务端
CONFIG_PACKAGE_openvpn-openssl=y        # OpenVPN (OpenSSL)
CONFIG_PACKAGE_luci-app-ipsec-vpnd=y    # IPsec VPN
CONFIG_PACKAGE_luci-app-shadowsocksr-libev=y # SSR 代理
CONFIG_PACKAGE_luci-app-passwall=y      # Passwall 代理工具

# ===== 文件服务 =====
CONFIG_PACKAGE_luci-app-samba4=y        # SMB 文件共享
CONFIG_PACKAGE_samba4-server=y          # Samba4 服务器
CONFIG_PACKAGE_luci-app-minidlna=y      # DLNA 媒体服务器
CONFIG_PACKAGE_luci-app-vsftpd=y        # FTP 服务器

# ===== 安全工具 =====
CONFIG_PACKAGE_luci-app-adguardhome=y   # AdGuardHome 广告过滤
CONFIG_PACKAGE_luci-app-fail2ban=y      # 防暴力破解

# ===== 其他功能 =====
CONFIG_PACKAGE_luci-app-mosquitto=y     # MQTT 消息代理
CONFIG_PACKAGE_luci-app-zerotier=y      # 虚拟局域网工具
CONFIG_PACKAGE_luci-app-netdata=y       # 实时系统监控

# ===== IPQ5332 特定优化 =====
CONFIG_PACKAGE_kmod-thermal-qcom=y       # QCOM 热管理驱动
CONFIG_PACKAGE_kmod-usb-dwc3-qcom=y      # QCOM USB3 驱动
CONFIG_PACKAGE_luci-app-wifi-scheduler=y # Wi-Fi 调度器

# ===== 系统优化 =====
# CONFIG_USE_MUSL=y                       # 移除musl，避免兼容性问题
CONFIG_KERNEL_SCHED_WALT=y              # WALT 调度器

# ===== Docker 支持 =====
CONFIG_PACKAGE_docker=y                 # Docker 核心
CONFIG_PACKAGE_docker-compose=y         # Docker Compose
CONFIG_PACKAGE_dockerd=y                # Docker 守护进程
CONFIG_PACKAGE_luci-app-dockerman=y     # LuCI Docker 管理界面
CONFIG_PACKAGE_luci-i18n-dockerman-zh-cn=y # 中文界面支持
CONFIG_PACKAGE_libltdl=y                # Docker 依赖库
CONFIG_PACKAGE_libseccomp=y             # 安全计算库
CONFIG_PACKAGE_conntrackd=y             # 连接跟踪
CONFIG_PACKAGE_kmod-br-netfilter=y      # 桥接网络过滤
CONFIG_PACKAGE_kmod-ipt-nat6=y           # IPv6 NAT
CONFIG_PACKAGE_kmod-ip6tables-nat=y      # IPv6 NAT 表
CONFIG_PACKAGE_kmod-sctp=y               # SCTP 协议支持
CONFIG_PACKAGE_tzdata=y                 # 时区数据
